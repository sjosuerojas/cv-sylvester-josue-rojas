---
import type { Entry } from "contentful";
import type { ItemFields, Language } from "../../models/content.model";
import Container from "../shared/Container.astro";
import SectionHeader from "../shared/SectionHeader.astro";

interface Props {
  content: Entry<ItemFields>[];
}

const { content } = Astro.props;
const data = Object.assign({}, ...content);
---

<Container class="skills" id="skills-lang">
  <SectionHeader>
    <Fragment slot="title">{data.fields.title}</Fragment>
    <Fragment slot="subtitle">{data.fields.legend}</Fragment>
  </SectionHeader>

  <!-- skills items -->
  <div class="skills dotted">
    <ul>
      {
        data.fields.languages.map((item: Language) => (
          <li>
            <div class="name">{item.name}</div>
            <div class="single-post-text">
              <p>{item.single_post_text}</p>
            </div>
            <div class="progress">
              <div class="percentage" style={`width: ${item.percentage}%;`}>
                <span class="percent">{item.percentage}%</span>
              </div>
            </div>
          </li>
        ))
      }
    </ul>
  </div>
</Container>
