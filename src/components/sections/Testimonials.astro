---
import type { Entry } from "contentful";
import type { ItemFields, Recommendation } from "../../models/content.model";
import Container from "../shared/Container.astro";
import SectionHeader from "../shared/SectionHeader.astro";
import { Image } from "@astrojs/image/components";

interface Props {
  content: Entry<ItemFields>[];
}

const { content } = Astro.props;
const data = Object.assign({}, ...content);
---

<Container class="testimonials" id="testimonials">
  <SectionHeader>
    <Fragment slot="title">{data.fields.title}</Fragment>
    <Fragment slot="subtitle">{data.fields.legend}</Fragment>
  </SectionHeader>

  <!-- testimonials items -->
  <div class="content-carousel">
    <div class="owl-carousel" data-slidesView="2" data-slidesview_mobile="1">
      {
        data.fields.recommendations.map((item: Recommendation) => (
          <div class="item">
            <div class="reviews-item">
              <div class="image">
                <Image
                  src={item.imageUrl}
                  width={70}
                  height={70}
                  alt={item.name}
                  format="jpg"
                />
              </div>
              <div class="info">
                <div class="name">{item.name}</div>
                <div class="company">{item.company}</div>
              </div>
              <div class="text">{item.recommendation}</div>
            </div>
          </div>
        ))
      }
    </div>

    <!-- navigation -->
    <div class="navs">
      <span class="prev fas fa-chevron-left"></span>
      <span class="next fas fa-chevron-right"></span>
    </div>
  </div>
</Container>
